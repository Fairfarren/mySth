webpackJsonp([10],{"3Itt":function(t,e){},XPVo:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),a("gOEM");var o={data:function(){return{player:{},playerOptions:{autoplay:!1,muted:!1,controls:!0,sourceOrder:!0,flash:{hls:{withCredentials:!1}},html5:{hls:{withCredentials:!1}},techOrder:["html5","flash"],language:"en",sources:[{type:"video/mp4",src:""},{type:"video/webm",src:""},{type:"video/ogg",src:""},{type:"rtmp/mp4",src:""},{withCredentials:!1,type:"application/x-mpegURL",src:""}]},playerStatus:{play:!1,listen:.5,muted:!1,allWindow:!1,allTime:"00:00:00",nowTime:"00:00:00",ready:!1,timer:""},scheduleLock:!0,lesson_list:[]}},methods:{getVideo:function(){var t=this;this.axios.get("/wx/lessons/"+this.$route.params.id).then(function(e){200===e.data.status_code?t.lesson_list=e.data.data:401===e.data.status_code?t.$store.commit("NOW401"):t.Toast.fail(e.data.msg)}).catch(function(t){console.log(t)})},getVideoUrl:function(t){var e=this,a=t||this.$route.query.lessonId;this.axios.get("/wx/lesson_info?lesson_id="+a).then(function(t){200===t.data.status_code?e.playerOptions.sources.forEach(function(e,a){e.src=t.data.data.detail.video}):401===t.data.status_code?e.$store.commit("NOW401"):e.Toast.fail(t.data.msg)}).catch(function(t){console.log(t),e.Toast.fail("网络连接错误")})},chioseVideoUrl:function(t){this.$router.push({query:{lessonId:t}}),this.getVideoUrl(t)},playerReadied:function(t){this.player=t},play:function(){},onPlayerCanplaythrough:function(t){var e=parseInt(this.player.duration()),a=e%60<10?"0"+e%60:e%60,o=parseInt(e/60),n=parseInt(e/60/60);this.playerStatus.allTime=n+":"+o+":"+a},onPlayerWaiting:function(){console.log("选择时间")},onPlayerPlaying:function(t){},onPlayerLoadeddata:function(){console.log("onPlayerLoadeddata")},onPlayerTimeupdate:function(){var t=parseInt(this.player.currentTime()),e=t%60<10?"0"+t%60:t%60,a=parseInt(t/60),o=parseInt(t/60/60);this.playerStatus.nowTime=o+":"+a+":"+e,this.playerStatus.nowTime===this.playerStatus.allTime&&(this.scheduleLock=!0,this.upDataSchedule(3)),this.upDataSchedule(2)},onPlayerCanplay:function(){console.log("onPlayerCanplay")},upDataSchedule:function(t){var e=this;this.scheduleLock&&(this.scheduleLock=!1,this.axios.post("/wx/schedule",{lesson_id:this.$route.query.lessonId,last_look:this.playerStatus.nowTime,status:t}).then(function(t){200===t.data.status_code?setTimeout(function(){e.scheduleLock=!0},12e4):401===t.data.status_code?e.$store.commit("NOW401"):e.Toast.fail(t.data.msg)}).catch(function(t){console.log(t),e.Toast.fail("网络连接错误")}))}},mounted:function(){this.getVideo(),this.getVideoUrl()}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"videoBox"},[a("video-player",{ref:"videoPlayer",staticClass:"vjs-custom-skin",attrs:{id:"my_video_1",options:t.playerOptions},on:{ready:t.playerReadied,play:t.play,canplaythrough:function(e){t.onPlayerCanplaythrough(e)},waiting:function(e){t.onPlayerWaiting(e)},playing:function(e){t.onPlayerPlaying(e)},loadeddata:function(e){t.onPlayerLoadeddata(e)},timeupdate:function(e){t.onPlayerTimeupdate(e)},canplay:function(e){t.onPlayerCanplay(e)}}})],1),t._v(" "),a("div",{staticClass:"lesson"},t._l(t.lesson_list,function(e,o){return a("ul",{key:o},[a("li",[t._v("\n        "+t._s(e.chapter)+"\n      ")]),t._v(" "),t._l(e.lesson[0],function(e,o){return a("li",{key:o,on:{click:function(a){t.chioseVideoUrl(e.id)}}},[a("img",{attrs:{src:"static/images/icon4_02.png",alt:""}}),t._v("\n        "+t._s(e.name)+"\n      ")])})],2)}))])},staticRenderFns:[]};var s=a("X4nt")(o,n,!1,function(t){a("3Itt")},"data-v-4038bd7c",null);e.default=s.exports}});
//# sourceMappingURL=10.0cfd0a4f53db2f3c66cc.js.map