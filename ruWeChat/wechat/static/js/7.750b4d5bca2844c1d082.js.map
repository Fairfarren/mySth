{"version":3,"sources":["webpack:///src/views/pay/payClass.vue","webpack:///./src/views/pay/payClass.vue?549c","webpack:///./src/views/pay/payClass.vue"],"names":["wx","window","payClass","computed","extends_default","Object","vuex_esm","_this","this","data","msg","error","_this2","id","href","then","res","num","clear","timer","weChatJSSDK","name","getClassAjax","pay_payClass","render","_vm","_h","$createElement","_c","_self","attrs","staticClass","_v","_s","$store","state","USER","username","USERPHONEPSW","_m","CLASS","category","directives","rawName","value","expression","alt","lesson_list","length","price","on","click","weChatPay","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"0IA8MAA,EAAAC,OAAAD,GACAE,GAEAC,SAAAC,OAAAC,OAAAC,EAAA,EAAAD,EAEA,qFAQA,IAAAE,EAAAC,qIAGAC,uCACAA,gDAEA,8BAEAC,qCAGAC,gBACA,kCAIA,IAAAC,EAAAJ,oEAEAK,uBACAC,OAFAC,KAAA,SAAAC,2DAMA,2BAEA,eACA,UAEA,qBACA,6BAEAC,YAEAC,sBACAC,eACA,KAEA,yBAEAV,6BAEAW,eACA,8BAGAV,qCAGAC,gBACA,wYA2CA,uCAIAA,sDAOAU,WACAC,iBChUAC,GADiBC,OAFjB,WAA0B,IAAAC,EAAAjB,KAAakB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,OAAOjB,GAAA,cAAiBe,EAAA,OAAYG,YAAA,QAAkBH,EAAA,OAAYG,YAAA,QAAkBH,EAAA,KAAAH,EAAAO,GAAA,kBAAAP,EAAAQ,GAAAR,EAAAS,OAAAC,MAAAC,KAAAC,UAAA,cAAAZ,EAAAO,GAAA,KAAAJ,EAAA,KAAAH,EAAAO,GAAA,iBAAAP,EAAAQ,GAAAR,EAAAa,cAAA,gBAAAb,EAAAO,GAAA,KAAAP,EAAAc,GAAA,KAAAd,EAAAO,GAAA,KAAAJ,EAAA,OAA2NG,YAAA,WAAqBH,EAAA,KAAAA,EAAA,QAAAH,EAAAO,GAAA,2BAAAP,EAAAO,GAAA,KAAAJ,EAAA,QAAAH,EAAAO,GAAA,aAAAP,EAAAQ,GAAAzB,KAAA0B,OAAAC,MAAAK,MAAAC,UAAA,gBAAAhB,EAAAO,GAAA,KAAAJ,EAAA,OAAAA,EAAA,OAA2LG,YAAA,SAAmBH,EAAA,OAAYc,aAAarB,KAAA,OAAAsB,QAAA,SAAAC,MAAApC,KAAA0B,OAAAC,MAAAK,MAAA,IAAAK,WAAA,gCAA0Gf,OAASgB,IAAA,QAAUrB,EAAAO,GAAA,KAAAJ,EAAA,OAA0BG,YAAA,UAAoBH,EAAA,MAAAH,EAAAO,GAAA,eAAAP,EAAAQ,GAAAzB,KAAA0B,OAAAC,MAAAK,MAAAnB,MAAA,gBAAAI,EAAAO,GAAA,KAAAJ,EAAA,KAAAH,EAAAO,GAAA,kBAAAP,EAAAQ,GAAAzB,KAAA0B,OAAAC,MAAAK,MAAAO,YAAAvC,KAAA0B,OAAAC,MAAAK,MAAAO,YAAAC,OAAA,mBAAAvB,EAAAO,GAAA,KAAAJ,EAAA,MAAAH,EAAAO,GAAA,gBAAAP,EAAAQ,GAAAzB,KAAA0B,OAAAC,MAAAK,MAAAS,OAAA,oBAAAxB,EAAAO,GAAA,KAAAJ,EAAA,OAA4WG,YAAA,SAAmBH,EAAA,QAAAH,EAAAO,GAAA,4BAAAP,EAAAO,GAAA,KAAAJ,EAAA,QAAAH,EAAAO,GAAA,gBAAAP,EAAAQ,GAAAzB,KAAA0B,OAAAC,MAAAK,MAAAS,OAAA,kBAAAxB,EAAAO,GAAA,KAAAJ,EAAA,OAA4KG,YAAA,iBAA2BH,EAAA,OAAYG,YAAA,SAAmBH,EAAA,QAAAH,EAAAO,GAAA,WAAAP,EAAAO,GAAA,KAAAJ,EAAA,QAAAH,EAAAO,GAAA,IAAAP,EAAAQ,GAAAzB,KAAA0B,OAAAC,MAAAK,MAAAS,YAAAxB,EAAAO,GAAA,KAAAJ,EAAA,OAAkIG,YAAA,UAAoBH,EAAA,QAAasB,IAAIC,MAAA1B,EAAA2B,aAAuB3B,EAAAO,GAAA,mCAEllDqB,iBADjB,WAAoC,IAAA5B,EAAAjB,KAAakB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBG,YAAA,WAAqBH,EAAA,KAAAH,EAAAO,GAAA,6ECEzI,IAcAsB,EAdAC,EAAA,OAcAC,CACAtD,EACAqB,GATA,EAVA,SAAAkC,GACAF,EAAA,SAaA,kBAEA,MAUAG,EAAA,QAAAJ,EAAA","file":"static/js/7.750b4d5bca2844c1d082.js","sourcesContent":["<style lang=\"scss\" scoped>\n  @mixin fontSize($size, $color) {\n    font-size: $size;\n    color: $color;\n  }\n  #payClass {\n\n  }\n  .box {\n    padding: 2.18rem 1.25rem;\n    border: {\n      bottom: 0.625rem solid #f2f1f6;\n    }\n    line-height: 2.5rem;\n    >.top {\n      @include fontSize(1.5rem, #333333);\n      border: {\n        bottom: 1px solid #f2f1f6;\n      }\n      p {\n         margin: {\n          bottom: 2.18rem;\n        }\n      }\n    }\n    >.bottom {\n      @include fontSize(1.375rem, #333333);\n      margin: {\n        top: 2.18rem;\n      }\n    }\n  }\n  .payBox {\n    padding: 2.18rem 1.25rem;\n    border: {\n      bottom: 0.625rem solid #f2f1f6;\n    }\n    >p {\n      @include fontSize(1.375rem, #333333);\n      margin: {\n        bottom: 1.25rem;\n      }\n    }\n    >div:nth-child(2) {\n      display: flex;\n      $height: 5.625rem;\n      >.left {\n        padding: {\n          right: 1.875rem;\n        }\n        img {\n          width: 10.31rem;\n          height: $height;\n          object-fit: cover;\n        }\n      }\n      >.right {\n        display: flex;\n        height: $height;\n        flex-wrap: wrap;\n        padding: {\n          bottom: 1.875rem;\n        }\n        margin: {\n          bottom: 1.875rem;\n        }\n        border: {\n          bottom: 1px solid #f2f1f6;\n        }\n        * {\n          width: 100%;\n        }\n        h3 {\n          @include fontSize(1.75rem, #333333);\n        }\n        p {\n          @include fontSize(1.25rem, #999999);\n        }\n        h4 {\n          @include fontSize(1.75rem, #ff2a2a);\n        }\n      }\n    }\n    >.last {\n      display: flex;\n      justify-content: space-between;\n      >span:nth-child(1) {\n        @include fontSize(1.5rem, #fa0018);\n      }\n      >span:nth-child(2) {\n        @include fontSize(1.5rem, #333333);\n      }\n    }\n  }\n  .bottomButton {\n    width: 100%;\n    border: {\n      top: 1px solid #e5e5e5;\n    }\n    position: fixed;\n    z-index: 10;\n    left: 0;\n    bottom: 0;\n    background: {\n      color: #fff;\n    }\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    >.left {\n      padding: {\n        left: 1.25rem;\n      }\n      >span:nth-child(1) {\n        @include fontSize(1.625rem, #333333);\n      }\n      >span:nth-child(2) {\n        @include fontSize(1.625rem, #0099fa);\n      }\n    }\n    >.right {\n      >span {\n        width: 12.5rem;\n        height: 6.25rem;\n        display: inline-block;\n        text-align: center;\n        line-height: 6.25rem;\n        @include fontSize(1.875rem, #ffffff);\n        font-weight: blod;\n        background: {\n          color: #0099fa;\n        }\n      }\n    }\n  }\n</style>\n\n<template>\n  <div id=\"payClass\">\n    <div class=\"box\">\n      <div class=\"top\">\n        <p>\n          购买账号：{{ $store.state.USER.username }}\n        </p>\n        <p>\n          手机号：{{ USERPHONEPSW }}\n        </p>\n      </div>\n      <div class=\"bottom\">\n        <p>\n          购买后可使用已绑定的手机号登录学习。购买后不支持退款、转让，请确认开课时间或有效期后再提交订单。\n        </p>\n      </div>\n    </div>\n    <div class=\"payBox\">\n      <p>\n        <span>\n          机构：\n        </span>\n        <span>\n          {{ this.$store.state.CLASS.category }}\n        </span>\n      </p>\n      <div>\n        <div class=\"left\">\n          <img v-lazy=\"this.$store.state.CLASS.img\" alt=\"\">\n        </div>\n        <div class=\"right\">\n          <h3>\n            {{ this.$store.state.CLASS.name }}\n          </h3>\n          <p>\n            课时：{{ this.$store.state.CLASS.lesson_list ? this.$store.state.CLASS.lesson_list.length : 0 }}\n          </p>\n          <h4>\n            ￥{{ this.$store.state.CLASS.price }}\n          </h4>\n        </div>\n      </div>\n      <div class=\"last\">\n        <span>\n          限时优惠\n        </span>\n        <span>\n          小计：{{ this.$store.state.CLASS.price }}\n        </span>\n      </div>\n    </div>\n    <!-- 底部fixed -->\n    <div class=\"bottomButton\">\n      <div class=\"left\">\n        <span>实付金额：</span>\n        <span>￥{{ this.$store.state.CLASS.price }}</span>\n      </div>\n      <div class=\"right\">\n        <span\n          @click=\"weChatPay\"\n        >\n          立即支付\n        </span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nconst wx = window.wx\nexport default {\n  computed: {\n    ...mapGetters(['USERPHONEPSW'])\n  },\n  data () {\n    return {\n      jssdk: {}\n    }\n  },\n  methods: {\n    // 获取课程详情\n    getClassAjax () {\n      this.axios.get(`/wx/course_info?course_id=${this.$route.params.id}`).then(res => {\n        if (res.data.status_code === 200) {\n          this.theClass = res.data.data\n          this.$store.commit('SETCLASS', res.data.data)\n        } else if (res.data.status_code === 401) {\n          this.$store.commit('NOW401')\n        } else {\n          this.Toast.fail(res.data.msg)\n        }\n      }).catch(error => {\n        console.log(error)\n        this.Toast.fail('网络连接错误')\n      })\n    },\n    // 去支付\n    weChatPay () {\n      this.axios.post('/wx/buy/course', {\n        course_id: this.$route.params.id,\n        url: window.location.href\n      }).then(res => {\n        if (res.data.status_code === 201) {\n          // 免费已经购买了\n          if (res.data.data.pay_type === 0) {\n            this.Toast.loading({\n              duration: 0,\n              forbidClick: true,\n              message: '正在为您免费购买课程'\n            })\n            let num = 3\n            const timer = setInterval(() => {\n              num--\n              if (!num) {\n                this.Toast.clear()\n                clearInterval(timer)\n                history.go(-1)\n              }\n            }, 1000)\n          } else {\n            this.jssdk = res.data.data\n            setTimeout(() => {\n              this.weChatJSSDK()\n            }, 100)\n          }\n        } else {\n          this.Toast.fail(res.data.msg)\n        }\n      }).catch(error => {\n        console.log(error)\n        this.Toast.fail('网络连接错误')\n      })\n    },\n    // 调微信支付接口\n    weChatJSSDK () {\n      wx.config({\n        debug: true, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。\n        appId: this.jssdk.appId, // 必填，企业号的唯一标识，此处填写企业号corpid\n        timestamp: this.jssdk.timeStamp, // 必填，生成签名的时间戳\n        nonceStr: this.jssdk.nonceStr, // 必填，生成签名的随机串\n        signature: 'MD5', // 必填，签名，见附录1\n        jsApiList: ['chooseWXPay'] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2\n      })\n      const that = this\n      wx.ready(res => {\n        // wx.chooseWXPay({\n        //   timestamp: this.jssdk.timeStamp, // 支付签名时间戳，注意微信jssdk中的所有使用timestamp字段均为小写。但最新版的支付后台生成签名使用的timeStamp字段名需大写其中的S字符\n        //   nonceStr: this.jssdk.nonceStr, // 支付签名随机串，不长于 32 位\n        //   package: this.jssdk.package, // 统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=\\*\\*\\*）\n        //   signType: 'MD5', // 签名方式，默认为'SHA1'，使用新版支付需传入'MD5'\n        //   paySign: this.jssdk.sign, // 支付签名\n        //   success: function (res) {\n        //     // 支付成功后的回调函数\n        //     that.Toast.success({\n        //       duration: 0,\n        //       forbidClick: true,\n        //       message: '付款成功'\n        //     })\n        //     setTimeout(() => {\n        //       that.Toast.clear()\n        //       history.go(-1)\n        //     }, 2000)\n        //   }\n        // })\n        wx.onMenuShareAppMessage({\n          title: 123, // 分享标题\n          desc: 321, // 分享描述\n          link: 'http://www.ruketang.com/wechat/#/', // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致\n          imgUrl: 'https://i.loli.net/2018/01/16/5a5d9b862a42b.jpg', // 分享图标\n          type: 'link', // 分享类型,music、video或link，不填默认为link\n          dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空\n          success: function () {\n            // 用户确认分享后执行的回调函数\n            alert('分享成功')\n          },\n          cancel: function (error) {\n            // 用户取消分享后执行的回调函数\n            alert('失败' + error)\n          }\n        })\n      })\n    }\n  },\n  mounted () {\n    const name = this.$store.state.CLASS.name\n    !name && this.getClassAjax()\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/pay/payClass.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"payClass\"}},[_c('div',{staticClass:\"box\"},[_c('div',{staticClass:\"top\"},[_c('p',[_vm._v(\"\\n        购买账号：\"+_vm._s(_vm.$store.state.USER.username)+\"\\n      \")]),_vm._v(\" \"),_c('p',[_vm._v(\"\\n        手机号：\"+_vm._s(_vm.USERPHONEPSW)+\"\\n      \")])]),_vm._v(\" \"),_vm._m(0)]),_vm._v(\" \"),_c('div',{staticClass:\"payBox\"},[_c('p',[_c('span',[_vm._v(\"\\n        机构：\\n      \")]),_vm._v(\" \"),_c('span',[_vm._v(\"\\n        \"+_vm._s(this.$store.state.CLASS.category)+\"\\n      \")])]),_vm._v(\" \"),_c('div',[_c('div',{staticClass:\"left\"},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(this.$store.state.CLASS.img),expression:\"this.$store.state.CLASS.img\"}],attrs:{\"alt\":\"\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"right\"},[_c('h3',[_vm._v(\"\\n          \"+_vm._s(this.$store.state.CLASS.name)+\"\\n        \")]),_vm._v(\" \"),_c('p',[_vm._v(\"\\n          课时：\"+_vm._s(this.$store.state.CLASS.lesson_list ? this.$store.state.CLASS.lesson_list.length : 0)+\"\\n        \")]),_vm._v(\" \"),_c('h4',[_vm._v(\"\\n          ￥\"+_vm._s(this.$store.state.CLASS.price)+\"\\n        \")])])]),_vm._v(\" \"),_c('div',{staticClass:\"last\"},[_c('span',[_vm._v(\"\\n        限时优惠\\n      \")]),_vm._v(\" \"),_c('span',[_vm._v(\"\\n        小计：\"+_vm._s(this.$store.state.CLASS.price)+\"\\n      \")])])]),_vm._v(\" \"),_c('div',{staticClass:\"bottomButton\"},[_c('div',{staticClass:\"left\"},[_c('span',[_vm._v(\"实付金额：\")]),_vm._v(\" \"),_c('span',[_vm._v(\"￥\"+_vm._s(this.$store.state.CLASS.price))])]),_vm._v(\" \"),_c('div',{staticClass:\"right\"},[_c('span',{on:{\"click\":_vm.weChatPay}},[_vm._v(\"\\n        立即支付\\n      \")])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bottom\"},[_c('p',[_vm._v(\"\\n        购买后可使用已绑定的手机号登录学习。购买后不支持退款、转让，请确认开课时间或有效期后再提交订单。\\n      \")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-7095e00a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.0@vue-loader/lib/selector.js?type=template&index=0!./src/views/pay/payClass.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7095e00a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=styles&index=0!./payClass.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=script&index=0!./payClass.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=script&index=0!./payClass.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7095e00a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=template&index=0!./payClass.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7095e00a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/pay/payClass.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}